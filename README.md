# üêï Alimentador Pet Autom√°tico com ESP8266

Um sistema completo de alimenta√ß√£o autom√°tica para pets baseado em ESP8266, com interface web moderna, sistema de calibra√ß√£o por gramas e controle anti-travamento.

![Version](https://img.shields.io/badge/version-4.1-blue.svg)
![Platform](https://img.shields.io/badge/platform-ESP8266-orange.svg)
![License](https://img.shields.io/badge/license-MIT-green.svg)

## üìã √çndice

- [Caracter√≠sticas](#-caracter√≠sticas)
- [Hardware Necess√°rio](#-hardware-necess√°rio)
- [Esquema de Liga√ß√£o](#-esquema-de-liga√ß√£o)
- [Instala√ß√£o](#-instala√ß√£o)
- [Configura√ß√£o](#-configura√ß√£o)
- [Interface Web](#-interface-web)
- [Funcionalidades](#-funcionalidades)
- [API Endpoints](#-api-endpoints)
- [Troubleshooting](#-troubleshooting)
- [Contribui√ß√£o](#-contribui√ß√£o)
- [Licen√ßa](#-licen√ßa)

## üåü Caracter√≠sticas

### ‚ú® Principais Funcionalidades
- üéØ **Sistema baseado em gramas** - Controle preciso da quantidade dispensada
- ‚öñÔ∏è **Calibra√ß√£o autom√°tica** - Ajuste fino para diferentes tipos de ra√ß√£o
- üïê **Programa√ß√£o de hor√°rios** - At√© 4 hor√°rios configur√°veis por dia
- üì± **Interface web moderna** - Controle total via navegador
- üîÑ **Sistema anti-travamento** - Revers√£o autom√°tica para evitar entupimentos
- üìä **Estat√≠sticas detalhadas** - Acompanhe o consumo do seu pet
- üì∂ **Conectividade WiFi** - Controle remoto e monitoramento
- üõ°Ô∏è **Sistema robusto** - Reconex√£o autom√°tica e tratamento de erros

### üîß Caracter√≠sticas T√©cnicas
- **Display OLED** - Informa√ß√µes em tempo real
- **Motor de passo** - Precis√£o na dispensa√ß√£o
- **Armazenamento EEPROM** - Configura√ß√µes persistem ap√≥s reinicializa√ß√£o
- **Interface responsiva** - Funciona em desktop e mobile
- **Logs estruturados** - Monitoramento via Serial Monitor

## üîå Hardware Necess√°rio

| Componente | Descri√ß√£o | Quantidade |
|------------|-----------|------------|
| **ESP8266** | NodeMCU v3 ou Wemos D1 Mini | 1x |
| **Display OLED** | SSD1306 128x64 I2C | 1x |
| **Motor de Passo** | 28BYJ-48 5V | 1x |
| **Driver Motor** | ULN2003 | 1x |
| **Rosca sem fim** | Para dispensar ra√ß√£o | 1x |
| **Fonte 5V** | Para alimentar o motor | 1x |
| **Jumpers** | Para conex√µes | V√°rios |
| **Protoboard/PCB** | Para montagem | 1x |

## üîó Esquema de Liga√ß√£o

### ESP8266 ‚Üí Display OLED (SSD1306)
```
ESP8266    ‚Üí    OLED
GPIO12     ‚Üí    SDA
GPIO14     ‚Üí    SCL
3.3V       ‚Üí    VCC
GND        ‚Üí    GND
```

### ESP8266 ‚Üí Driver ULN2003 ‚Üí Motor 28BYJ-48
```
ESP8266    ‚Üí    ULN2003
GPIO5      ‚Üí    IN1
GPIO4      ‚Üí    IN2
GPIO0      ‚Üí    IN3
GPIO2      ‚Üí    IN4
GPIO16     ‚Üí    ENABLE
5V         ‚Üí    VCC
GND        ‚Üí    GND
```

### Diagrama de Conex√£o
```
                ESP8266 NodeMCU
                ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
     Display    ‚îÇ             ‚îÇ    Motor Driver
     OLED       ‚îÇ   GPIO12    ‚îÇ      ULN2003
   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ   GPIO14    ‚îÇ    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇ SDA  ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚î§   3.3V      ‚îÇ    ‚îÇ   IN1   ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ GPIO5
   ‚îÇ SCL  ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚î§   GND       ‚îÇ    ‚îÇ   IN2   ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ GPIO4
   ‚îÇ VCC  ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚î§             ‚îÇ    ‚îÇ   IN3   ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ GPIO0
   ‚îÇ GND  ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚î§   GPIO16    ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚î§ ENABLE  ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ GPIO2
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ   5V        ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚î§   VCC   ‚îÇ
                ‚îÇ   GND       ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚î§   GND   ‚îÇ
                ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                        ‚îÇ
                                  Motor 28BYJ-48
                                   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                                   ‚îÇ Stepper ‚îÇ
                                   ‚îÇ  Motor  ‚îÇ
                                   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üì• Instala√ß√£o

### 1. Arduino IDE
```bash
# Instale as bibliotecas necess√°rias:
# - ESP8266WiFi
# - ESP8266WebServer
# - Adafruit GFX Library
# - Adafruit SSD1306
# - Stepper
# - NTPClient
# - EEPROM
```

### 2. Configura√ß√£o do WiFi
```cpp
// Edite no c√≥digo antes de fazer upload:
const char* ssid = "SEU_WIFI_AQUI";
const char* password = "SUA_SENHA_AQUI";
```

### 3. Upload do C√≥digo
1. Conecte o ESP8266 via USB
2. Selecione a placa correta em `Tools > Board > ESP8266 Boards`
3. Escolha a porta COM correta
4. Clique em Upload

### 4. Primeira Configura√ß√£o
1. Abra o Serial Monitor (115200 baud)
2. Anote o IP exibido ap√≥s conectar ao WiFi
3. Acesse o IP no navegador

## ‚öôÔ∏è Configura√ß√£o

### üì° Configura√ß√£o Inicial
1. **WiFi**: Configure suas credenciais no c√≥digo
2. **Calibra√ß√£o**: Primeira execu√ß√£o requer calibra√ß√£o do sistema
3. **Hor√°rios**: Configure os hor√°rios de alimenta√ß√£o
4. **Meta Di√°ria**: Defina a quantidade total de ra√ß√£o por dia

### üéØ Processo de Calibra√ß√£o
1. Acesse `/calibrate` na interface web
2. Coloque um recipiente na sa√≠da
3. Dispense 3-5 rota√ß√µes para teste
4. Pese a ra√ß√£o dispensada
5. Digite o peso medido e salve

## üì± Interface Web

### üè† Dashboard Principal (`/`)
- **Status em tempo real** do sistema
- **Controles de alimenta√ß√£o** (25g, 50g, 100g)
- **Informa√ß√µes de calibra√ß√£o** e estat√≠sticas
- **Status do motor** e conex√£o WiFi
- **Hor√°rios programados**

### ‚öôÔ∏è Configura√ß√µes (`/config`)
- **Estat√≠sticas de uso** detalhadas
- **Informa√ß√µes de calibra√ß√£o**
- **Sistema anti-travamento**
- **Configura√ß√£o de meta di√°ria**
- **Visualiza√ß√£o de hor√°rios**

### ‚è∞ Hor√°rios (`/schedule`)
- **Interface moderna** para configurar hor√°rios
- **Toggle switches** para ativar/desativar
- **Sele√ß√£o de hora e minuto**
- **Configura√ß√£o de gramas** por hor√°rio
- **Valida√ß√£o em tempo real**

### ‚öñÔ∏è Calibra√ß√£o (`/calibrate`)
- **Processo step-by-step** de calibra√ß√£o
- **Dispensa√ß√£o para teste**
- **C√°lculo autom√°tico** da calibra√ß√£o
- **Dicas para calibra√ß√£o precisa**

### üîÑ Reset (`/reset`)
- **Reset de estat√≠sticas** apenas
- **Reinicializa√ß√£o completa** do sistema
- **Confirma√ß√µes de seguran√ßa**
- **Preserva√ß√£o de configura√ß√µes**

## üöÄ Funcionalidades

### üéÆ Controles Manuais
- **Alimenta√ß√£o r√°pida**: 25g, 50g, 100g
- **Teste**: 10g para verifica√ß√µes
- **Revers√£o**: Limpeza manual da rosca
- **Controle do motor**: Liga/desliga manual

### ‚è∞ Alimenta√ß√£o Autom√°tica
- **At√© 4 hor√°rios** configur√°veis
- **Controle por gramas** preciso
- **Distribui√ß√£o autom√°tica** da meta di√°ria
- **Sistema de retry** em caso de falha

### üìä Monitoramento
- **Tempo real**: Status no display OLED
- **Estat√≠sticas web**: Total dispensado, alimenta√ß√µes
- **Logs detalhados**: Via Serial Monitor
- **Reconex√£o autom√°tica**: WiFi e sistema

### üîß Sistema Anti-Travamento
- **Revers√£o peri√≥dica**: A cada 5g dispensados
- **Revers√£o final**: Evita gotejamento
- **Detec√ß√£o autom√°tica**: Sem interven√ß√£o manual
- **Configur√°vel**: Par√¢metros ajust√°veis

## üåê API Endpoints

### Controles B√°sicos
```
GET /                    # Dashboard principal
GET /feed               # Alimenta√ß√£o 50g
GET /feed1              # Alimenta√ß√£o 25g
GET /feed3              # Alimenta√ß√£o 50g
GET /feed5              # Alimenta√ß√£o 100g
GET /test               # Teste 10g
GET /reverse            # Revers√£o manual
GET /stop               # Parar alimenta√ß√£o
```

### Configura√ß√µes
```
GET /config             # P√°gina de configura√ß√µes
GET /calibrate          # P√°gina de calibra√ß√£o
GET /schedule           # Configurar hor√°rios
GET /reset              # Op√ß√µes de reset
```

### API de Dados
```
GET /status             # Status JSON completo
GET /set_calibration    # Salvar calibra√ß√£o
GET /set_daily          # Configurar meta di√°ria
GET /set_schedule       # Salvar hor√°rios
GET /redistribute       # Redistribuir hor√°rios
```

### Controles do Sistema
```
GET /motor_on           # Ligar motor
GET /motor_off          # Desligar motor
GET /reset_stats        # Resetar estat√≠sticas
GET /reset_system       # Reiniciar sistema
```

## üîç Troubleshooting

### ‚ùå Problemas Comuns

#### WiFi n√£o conecta
```
Verifica√ß√µes:
‚úì SSID e senha corretos no c√≥digo
‚úì Rede 2.4GHz (ESP8266 n√£o suporta 5GHz)
‚úì Sinal WiFi suficiente
‚úì Reset do ESP8266
```

#### Motor n√£o gira
```
Verifica√ß√µes:
‚úì Conex√µes do ULN2003
‚úì Alimenta√ß√£o 5V do motor
‚úì Enable pin (GPIO16) conectado
‚úì C√≥digo do motor correto
```

#### Display n√£o funciona
```
Verifica√ß√µes:
‚úì Endere√ßo I2C correto (0x3C)
‚úì Conex√µes SDA/SCL
‚úì Alimenta√ß√£o 3.3V
‚úì Biblioteca Adafruit_SSD1306
```

#### Calibra√ß√£o imprecisa
```
Solu√ß√µes:
‚úì Use balan√ßa precisa (0.1g)
‚úì Ra√ß√£o seca e limpa
‚úì M√∫ltiplas calibra√ß√µes
‚úì Rosca sem fim limpa
```

### üîß Debug
```cpp
// Monitor Serial (115200 baud) mostra:
[timestamp] EVENT: details
[12345] SYSTEM_START: Alimentador Pet v4.1
[12678] WIFI_CONNECTED: 192.168.1.100
[15234] FEEDING_START: Iniciando 50g (5 rot)
[18456] FEEDING_COMPLETE: Dispensado: 50.0g
```

## üìà Especifica√ß√µes

### Performance
- **Precis√£o**: ¬±0.5g (com calibra√ß√£o)
- **Velocidade**: ~10g por rota√ß√£o (configur√°vel)
- **Capacidade**: Limitada pelo recipiente
- **Autonomia**: Depende da fonte de energia

### Conectividade
- **WiFi**: 802.11 b/g/n 2.4GHz
- **Interface**: HTTP/HTML responsiva
- **Protocolos**: TCP/IP, HTTP, NTP
- **Reconex√£o**: Autom√°tica a cada 30s

### Armazenamento
- **EEPROM**: 512 bytes para configura√ß√µes
- **Backup**: Configura√ß√µes persistem sem energia
- **Reset**: Op√ß√µes de reset seletivo
- **Integridade**: Checksum de valida√ß√£o

## ü§ù Contribui√ß√£o

Contribui√ß√µes s√£o bem-vindas! Por favor:

1. **Fork** o reposit√≥rio
2. Crie uma **branch** para sua feature (`git checkout -b feature/AmazingFeature`)
3. **Commit** suas mudan√ßas (`git commit -m 'Add some AmazingFeature'`)
4. **Push** para a branch (`git push origin feature/AmazingFeature`)
5. Abra um **Pull Request**

### üìù Diretrizes
- Mantenha o c√≥digo limpo e comentado
- Teste todas as funcionalidades
- Atualize a documenta√ß√£o se necess√°rio
- Siga o padr√£o de c√≥digo existente

## üìã TODO / Roadmap

- [ ] **App mobile** nativo
- [ ] **Notifica√ß√µes push** quando alimentar
- [ ] **Hist√≥rico detalhado** de alimenta√ß√µes
- [ ] **M√∫ltiplos pets** com perfis diferentes
- [ ] **Sensor de n√≠vel** de ra√ß√£o
- [ ] **Integra√ß√£o IoT** (Alexa, Google Home)
- [ ] **Backup na nuvem** das configura√ß√µes
- [ ] **API REST** completa

## üìÑ Licen√ßa

Este projeto est√° licenciado sob a Licen√ßa MIT - veja o arquivo [LICENSE](LICENSE) para detalhes.

## üë®‚Äçüíª Autor

**Devito** - [GitHub](https://github.com/Devito552)

## üôè Agradecimentos

- Comunidade Arduino/ESP8266
- Bibliotecas open source utilizadas
- Beta testers e colaboradores
- Pets que inspiraram o projeto! üêïüê±

---

## üìû Suporte

Se voc√™ encontrar problemas ou tiver sugest√µes:

1. **Issues**: Use as [GitHub Issues](https://github.com/Devito552/automatic_dog_feeder_iot/issues)
2. **Documenta√ß√£o**: Consulte este README

---

**‚≠ê Se este projeto foi √∫til, considere dar uma estrela no GitHub!**

*Alimentador Pet v4.1 - Tecnologia a servi√ßo do bem-estar animal* üêæ
